!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],e):"object"==typeof exports?exports.VueDynamicInput=e(require("lodash")):t.VueDynamicInput=e(t._)}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(e,n){e.exports=t},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"setValue",(function(){return l})),n.d(r,"clearValue",(function(){return u})),n.d(r,"insertValue",(function(){return o})),n.d(r,"backspaceValue",(function(){return c})),n.d(r,"confirmValue",(function(){return d}));var i=n(0);function s(t,e){return Object(i.defaultTo)(e[t.dataset.smart],e.text)}function a(t,e,n){void 0===n&&(n=e.length),t.value=e,t.selectionStart=n,t.selectionEnd=n,t.dispatchEvent(new Event("input"))}function l(t,e,n,r){let i=s(t,e);i.restrict(n)&&i.dynamicRestrict(n)&&a(t,...i.format(n,r))}function u(t,e){a(t,...s(t,e).format("",0))}function o(t,e,n){let r=t.value.substring(0,t.selectionStart),i=r+n+t.value.substring(t.selectionEnd),l=(r+n).length,u=s(t,e);u.restrict(i)&&u.dynamicRestrict(i)&&a(t,...u.format(i,l))}function c(t,e){let n=t.selectionEnd!==t.selectionStart,r=t.selectionStart-(n?0:1),i=t.value.substring(0,r),l=i+t.value.substring(t.selectionEnd),u=i.length;a(t,...s(t,e).format(l,u))}function d(t){"restore"in t.dataset&&(t.dataset.restore="false")}var p={number:{restrict:t=>/^[0-9]*\.?[0-9]*$/.test(t),format:function(t,e){return[t.replace(/^0+([0-9]\.?)/,"$1"),e]},parse:t=>Number(t)},boolean:{parse:t=>["true","t","yes","y"].includes(Object(i.toUpper)(t))}},h=function(){var t=this.$createElement;return(this._self._c||t)("input",this._g({attrs:{"data-smart":this.type,placeholder:this.placeholder},on:{input:this.handleInput,focus:this.handleFocus,blur:this.handleBlur}},this.listeners))};function f(t,e,n,r,i,s,a,l){var u,o="function"==typeof t?t.options:t;if(e&&(o.render=e,o.staticRenderFns=n,o._compiled=!0),r&&(o.functional=!0),s&&(o._scopeId="data-v-"+s),a?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},o._ssrRegister=u):i&&(u=l?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(o.functional){o._injectStyles=u;var c=o.render;o.render=function(t,e){return u.call(e),c(t,e)}}else{var d=o.beforeCreate;o.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:o}}h._withStripped=!0;var v=f({name:"smart-input",props:{type:{type:String,default:"text"},value:{default:null},placeholder:{type:String}},data:t=>({isFocused:!1,ignoreValue:!1}),mounted(){let t=this.stringify(this.value);[t]=this.format(t,t.length),this.$el.value=t,this.$el.addEventListener("paste",t=>{t.preventDefault();let e=t.clipboardData.getData("text");o(this.$el,this.types,e)})},computed:{valid(){return this.types[this.type].valid},invalid(){return this.types[this.type].invalid},format(){return this.types[this.type].format},parse(){return this.types[this.type].parse},stringify(){return this.types[this.type].stringify},listeners(){let{input:t,...e}=this.$listeners;return e}},methods:{validity(t){let e=this.valid.bind(this)(t);return!this.invalid.bind(this)(t)&&(!!e||null)},handleInput(t){let e=this.parse(this.$el.value);e!==this.value&&(this.ignoreValue=!0),this.$emit("input",e),this.isFocused&&(this.tracking.value=this.$el.value,this.tracking.validity=this.validity(this.$el.value),this.tracking.parsed=e)},handleFocus(t){this.isFocused=!0,this.tracking.active=!0,this.tracking.type=this.type,this.tracking.value=this.$el.value,this.tracking.validity=this.validity(this.$el.value),this.tracking.parsed=this.parse(this.$el.value)},handleBlur(t){this.isFocused=!1,this.tracking.active=!1,this.$el.value=this.stringify(this.value)}},watch:{type(t){this.isFocused&&(this.tracking.type=t)},value(t){this.ignoreValue?this.ignoreValue=!1:(t=this.stringify(t),[t]=this.format(t,t.length),this.$el.value=t)}}},h,[],!1,null,null,null);v.options.__file="src/SmartInput.vue";var y=v.exports,m=function(){var t=this.$createElement;return(this._self._c||t)("smart-input",this._g(this._b({attrs:{"data-restore":"true"},on:{focus:this.handleFocus,blur:this.handleBlur}},"smart-input",this.$attrs,!1),this.$listeners))};m._withStripped=!0;var b=f({name:"restore-input",inheritAttrs:!1,data:t=>({restoreValue:null}),methods:{handleFocus(t){this.restoreValue=this.$attrs.value},handleBlur(t){"true"===this.$el.dataset.restore&&this.$emit("input",this.restoreValue),this.$el.dataset.restore="true"}}},m,[],!1,null,null,null);b.options.__file="src/RestoreInput.vue";var g=b.exports;function _(t,e){t.prototype.$input={},t.prototype.$input.restrict=null;let n={restrict:t=>!0,dynamicRestrict:e=>{let n=t.prototype.$input.restrict;return!n||n(e)},valid:t=>t.length>0,invalid:t=>!1,format:(t,e)=>[t,e],parse:t=>t,stringify:t=>Object(i.toString)(t)},s={text:n,...Object(i.forEach)(p,t=>Object(i.defaults)(t,n)),...Object(i.forEach)(e,t=>Object(i.defaults)(t,n))},a=t.observable({active:!1,type:null,value:"",validity:null,parsed:null});t.component(g.name,g),t.component(y.name,{...y,mixins:[{beforeCreate(){this.types=s,this.tracking=a}}]}),document.addEventListener("keydown",t=>{if(!t.target.dataset.smart)return;let e=1===t.key.length,n=t.ctrlKey||t.altKey||t.metaKey;e&&!n?(t.preventDefault(),o(document.activeElement,s,t.key)):"Backspace"===t.key&&(t.preventDefault(),c(document.activeElement,s))}),document.addEventListener("mousedown",t=>{t.target.closest(".blurry")&&t.preventDefault()}),Object(i.forEach)(a,(e,n)=>{Object.defineProperty(t.prototype.$input,n,{get:()=>a[n],enumerable:!0,configurable:!0})}),Object(i.forEach)(r,(e,n)=>{Object.defineProperty(t.prototype.$input,n,{value:(...t)=>{let n=document.activeElement;n.dataset.smart&&e(n,s,...t)},writable:!0,enumerable:!0,configurable:!0})})}n.d(e,"install",(function(){return _}));let $={install:_};e.default=$}])}));